<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>כלים לשיפור חווית הגלישה</title>
  <style>
    body {
      font-family: 'Heebo', Arial, sans-serif;
      background: linear-gradient(135deg, #667eea, #764ba2);
      color: #fff;
      padding: 2rem;
      margin: 0;
      direction: rtl;
      min-height: 100vh;
      box-sizing: border-box;
    }
    .container {
      max-width: 800px;
      margin: 0 auto;
      background: rgba(255, 255, 255, 0.1);
      padding: 2rem;
      border-radius: 12px;
      box-shadow: 0 8px 32px rgba(0,0,0,0.2);
    }
    h1, h3 {
      text-align: center;
    }
    h1 {
      margin-bottom: 2rem;
      border-bottom: 2px solid rgba(255,255,255,0.3);
      padding-bottom: 1rem;
    }
    h3 {
      margin-top: 3rem;
    }
    .tool-section {
      background: rgba(255, 255, 255, 0.15);
      padding: 1.5rem;
      border-radius: 8px;
      margin-bottom: 2rem;
    }
    h2 {
      margin-top: 0;
      margin-bottom: 1rem;
    }
    p {
      line-height: 1.7;
      margin-top: 0;
    }
    a.bookmarklet {
      display: inline-block;
      color: white;
      padding: 1rem 1.5rem;
      border-radius: 8px;
      text-decoration: none;
      font-size: 1.2rem;
      cursor: grab;
      box-shadow: 0 4px 8px rgba(0,0,0,0.2);
      user-select: none;
      transition: background-color 0.3s ease, transform 0.2s ease;
      margin-top: 1rem;
    }
    a.bookmarklet:hover {
      transform: translateY(-2px);
    }
    /* Color coding for each tool */
    a.bookmarklet.v1 { background-color: #007bff; }
    a.bookmarklet.v1:hover { background-color: #0056b3; }
    a.bookmarklet.v2 { background-color: #28a745; }
    a.bookmarklet.v2:hover { background-color: #218838; }
    /* New color for the advanced tool */
    a.bookmarklet.v3 { background-color: #6f42c1; } 
    a.bookmarklet.v3:hover { background-color: #5a32a3; }
  </style>
</head>
<body>

  <div class="container">
    <h1>סרגל הכלים שלי</h1>

    <!-- ====================================================== -->
    <!--          כלי מס' 1: כללי עם כפתור צף (יציב)            -->
    <!-- ====================================================== -->
    <div class="tool-section">
      <h2>1. כלי כללי להחלפת כיווניות (עם כפתור צף)</h2>
      <p>
        כלי אוניברסלי שנועד לעבוד על <strong>כל אתר אינטרנט</strong>. גררו את הכפתור לסרגל הסימניות. בלחיצה עליו, יתווסף לדף כפתור צף שיאפשר לכם להחליף את כיוון הכתיבה של הדף כולו בין ימין-לשמאל (RTL) לשמאל-לימין (LTR).
      </p>
       <a href="javascript:(()=>{const t=document.getElementById('dir-toggle-btn');if(t)return t.style.display='flex',void localStorage.removeItem('btnHidden');const e=document.createElement('button');e.id='dir-toggle-btn';const o=document.createElement('button');o.textContent='×',o.title='הסתר כפתור',o.type='button';const n=document.createElement('span');e.appendChild(o),e.appendChild(n),Object.assign(e.style,{position:'fixed',padding:'8px 12px',backgroundColor:'#007bff',color:'white',border:'none',borderRadius:'8px',fontSize:'16px',fontFamily:'Arial, sans-serif',cursor:'grab',boxShadow:'0 4px 8px rgba(0,0,0,0.2)',zIndex:'99999',userSelect:'none',touchAction:'none',display:'flex',alignItems:'center',gap:'8px',transition:'background-color .3s ease'}),Object.assign(o.style,{background:'rgba(255,255,255,.2)',border:'none',color:'#fff',fontWeight:'bold',fontSize:'16px',cursor:'pointer',padding:'0',margin:'0',lineHeight:'1',width:'18px',height:'18px',display:'flex',justifyContent:'center',alignItems:'center',borderRadius:'50%',transition:'background-color .3s ease'});e.onmouseenter=()=>e.style.backgroundColor='#0056b3',e.onmouseleave=()=>e.style.backgroundColor='#007bff',o.onmouseenter=()=>o.style.backgroundColor='rgba(255,255,255,.5)',o.onmouseleave=()=>o.style.backgroundColor='rgba(255,255,255,.2)';const i=localStorage.getItem('direction');i&&(document.documentElement.dir=i),n.textContent='rtl'===document.documentElement.dir?'החלף ל-LTR':'החלף ל-RTL';let s=!1;e.addEventListener('click',t=>{if(s||t.target===o)return;const i=document.documentElement,l='rtl'===i.dir?'ltr':'rtl';i.dir=l,n.textContent='rtl'===l?'החלף ל-LTR':'החלף ל-RTL',localStorage.setItem('direction',l)}),e.onmousedown=t=>{if(0!==t.button)return;s=!1;let o=t.clientX,n=t.clientY;e.style.cursor='grabbing';const i=e.getBoundingClientRect(),l=t.clientX-i.left,c=t.clientY-i.top;const a=d=>{const i=d.clientX-o,r=d.clientY-n;if(!s&&(Math.abs(i)>5||Math.abs(r)>5))s=!0;if(!s)return;let t=d.clientX-l,a=d.clientY-c;const u=window.innerWidth-e.offsetWidth,g=window.innerHeight-e.offsetHeight;t=Math.min(Math.max(0,t),u),a=Math.min(Math.max(0,a),g),e.style.left=t+'px',e.style.top=a+'px',e.style.right='auto',e.style.bottom='auto'},r=()=>{document.removeEventListener('mousemove',a),document.removeEventListener('mouseup',r),e.style.cursor='grab',s&&localStorage.setItem('btnPos',JSON.stringify({left:e.style.left,top:e.style.top})),setTimeout(()=>s=!1,0)};document.addEventListener('mousemove',a),document.addEventListener('mouseup',r)},e.ondragstart=()=>!1,o.onclick=t=>{t.stopPropagation(),e.style.display='none',localStorage.setItem('btnHidden','true')};const l=localStorage.getItem('btnPos');l?Object.assign(e.style,JSON.parse(l)):(e.style.left='20px',e.style.top='20px');'true'===localStorage.getItem('btnHidden')&&(e.style.display='none'),document.body.appendChild(e)})();" class="bookmarklet v1" draggable="true">
        גרור אותי (כללי עם כפתור) ←
      </a>
    </div>
    
    <!-- ====================================================== -->
    <!--    כלי מס' 2: כללי ללא כפתור (מתג) - קוד משופר          -->
    <!-- ====================================================== -->
    <div class="tool-section">
      <h2>2. כלי כללי להחלפת כיווניות (פעולה ישירה)</h2>
      <p>
        כלי אוניברסלי שנועד לעבוד על <strong>כל אתר אינטרנט</strong>. בלחיצה עליו, הוא יחליף את כיוון הדף כולו בין RTL ל-LTR באופן מיידי. לחיצה נוספת תחזיר את המצב לקדמותו.
      </p>
       <a href="javascript:(()=>{const t=document.documentElement;t.dir='rtl'===t.dir?'ltr':'rtl'})();" class="bookmarklet v2" draggable="true">
        גרור אותי (כללי ישיר) ←
      </a>
    </div>

    <!-- ====================================================== -->
    <!--    כלי מס' 3: AI STUDIO (באג תוקן + לוגיקה משופרת)     -->
    <!-- ====================================================== -->
    <div class="tool-section">
      <h2>3. כלי משופר ל-AI Studio (תיקון RTL + חיצי ניווט)</h2>
      <p>
        כלי "הכל כלול" שתוכנן במיוחד עבור <strong>AI Studio</strong>. בלחיצה אחת, הוא מבצע שתי פעולות: <strong>(1)</strong> מתקן באופן קבוע את בעיות התצוגה בעברית בצ'אט. <strong>(2)</strong> מוסיף חיצי ניווט (↑↓) המאפשרים לדלג בקלות בין ההודעות.
      </p>
      <a href="javascript:(()=>{const t='ai-studio-nav-container',e='custom-rtl-styles-injector',o='conditional-rtl-style-injector';if(document.getElementById(t)?.remove(),window.aiStudioNavReposition&&window.removeEventListener('resize',window.aiStudioNavReposition),document.getElementById(e)?.remove(),document.getElementById(o)?.remove(),!document.querySelector('ms-autoscroll-container'))return void alert('שגיאה: לא נמצא אזור הגלילה הראשי (`ms-autoscroll-container`).');const i=document.querySelector('ms-autoscroll-container'),n=document.createElement('div');n.id=t,Object.assign(n.style,{position:'fixed',zIndex:'9999',display:'flex',gap:'8px',opacity:'0',pointerEvents:'none',transition:'opacity .3s ease-in-out'});const d=t=>{const e=document.createElement('div');return e.textContent=t,Object.assign(e.style,{cursor:'pointer',backgroundColor:'rgba(255, 255, 255, .5)',color:'#000',border:'1px solid #000',borderRadius:'50%',width:'32px',height:'32px',display:'flex',alignItems:'center',justifyContent:'center',fontSize:'20px',userSelect:'none',backdropFilter:'blur(4px)',webkitBackdropFilter:'blur(4px)'}),e},s=d('↑'),r=d('↓');n.append(s,r),document.body.appendChild(n);const l=()=>{const t=document.querySelector('footer.not-zero-state'),e=t?t.offsetHeight+25:95,o=i.getBoundingClientRect();n.style.bottom=`${e}px`,n.style.left=`${o.left+o.width/2}px`,n.style.transform='translateX(-50%)'};l(),window.aiStudioNavReposition=l,window.addEventListener('resize',l);let a;const c=()=>{clearTimeout(a),a=setTimeout(()=>{n.style.opacity='0',n.style.pointerEvents='none'},1500)};i.addEventListener('scroll',()=>{n.style.opacity='0.8',n.style.pointerEvents='auto',c()}),n.addEventListener('mouseenter',()=>clearTimeout(a)),n.addEventListener('mouseleave',c);const p=t=>{const e=Array.from(i.querySelectorAll('ms-chat-turn'));if(!e.length)return;const o=i.getBoundingClientRect();let n=-1,d=0;e.forEach((t,i)=>{const s=t.getBoundingClientRect(),r=Math.max(s.top,o.top),l=Math.min(s.bottom,o.bottom);Math.max(0,l-r)>d&&(d=Math.max(0,l-r),n=i)}),n=-1==n?0:n;const s='up'===t?n-1:n+1;e[s]&&e[s].scrollIntoView({behavior:'smooth',block:'nearest'})};s.addEventListener('click',()=>p('up')),r.addEventListener('click',()=>p('down'));const u=document.createElement('style');u.id=e,u.textContent='ms-chat-turn:not(:has(ms-thought-chunk)) .chat-turn-container,div.user-prompt-container,div.text-wrapper {direction: rtl !important;text-align: right !important;}ms-code-block, ms-code-block pre, ms-code-block code {direction: ltr !important;text-align: left !important;}ms-cmark-node ol, ms-cmark-node ul {padding-right: 20px !important;padding-left: 0 !important;}',document.head.appendChild(u),document.documentElement.classList.contains('translated-rtl')&&(()=>{const t=document.createElement('style');t.id=o,t.textContent='ms-chat-turn:has(ms-thought-chunk) .chat-turn-container {direction: rtl !important;text-align: right !important;}',document.head.appendChild(t)})})();" class="bookmarklet v3" draggable="true">
        גרור אותי (AI Studio משופר) ←
      </a>
    </div>

    <h3>היסטוריית גרסאות</h3>
    <p style="text-align: center; font-size: 0.9rem; opacity: 0.8;">
      גירסה 3.0.0: תיקון באגים ושיפורי יציבות ואמינות בכלים.<br>
      גירסה 2.0.0: שילוב כלי AI Studio מתקדם (תיקון RTL + חיצי ניווט) וארגון מחדש.<br>
      גירסה 1.0.3: שיפור חווית משתמש - הסרת התראות וטקסט מיותר.<br>
      גירסה 1.0.2: פיצול לארבעה כלים נפרדים לבחירת המשתמש.<br>
      גירסה 1.0.1: שני לחצנים יציבים, כולל תיקון תאימות לאתרים מאובטחים (CSP).<br>
      גירסה 1.0.0: גרסת בטא ראשונית.
    </p>
  </div>
</body>
</html>
